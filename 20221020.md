# XSS

### 1. 회원가입 처리

회원가입 기능 시험을 하던 중, 특정 아이디를 이용할 때만 레이아웃이 망가지는 에러가 발생했다.

알고보니 그 아이디를 가입할 때, 닉네임 입력창에 >-< 이런 깜찍한 이모티콘을 넣은 것을 확인했다. 그래서 >-<가 들어간 닉네임이 화면에 그려질 때, HTML 태그에 영향을 미쳐 레이아웃이 망가진 것이였다.

그래서 특수 기호를 처리하는 정규식을 통해서 <, >, ‘, “, 같은 특수기호를 입력하지 못하게 처리했다.

```jsx
username: {
  get valid() {
    return !value.match(/[^ㄱ-ㅎ|ㅏ-ㅣ|가-힣|\w]/g);
  },
},
```

### 2. 피스 등록 처리

회원가입 처리는 아이디를 생성할 때 정규식으로 특수기호 제한을 걸면되지만, 피스를 등록할 때는 특수기호를 사용할 수 있게 해야했다. 그래서 아래의 코드처럼 특수 기호를 엔티티로 치환해서 처리를 해주었다.

```jsx
protectXSS(content) {
    return content
      .replace(/'/g, '&apos;')
      .replace(/"/g, '&quot;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/\(/g, '&#40;')
      .replace(/\)/g, '&#41;')
      .replace(/\//, '&#x2F;');
  }
```
